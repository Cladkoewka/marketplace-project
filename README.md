
# Marketplace Project

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—ã–π backend-–ø—Ä–æ–µ–∫—Ç –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π, –≤–∫–ª—é—á–∞—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±–º–µ–Ω —Å–æ–±—ã—Ç–∏—è–º–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **NGINX** ‚Äî API Gateway
- **Orders Service** ‚Äî –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- **Customers Service** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- **PostgreSQL** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- **Kafka** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- **Prometheus + Grafana** ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- **Docker + Docker Compose** ‚Äî —Å–±–æ—Ä–∫–∞ –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

![–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ –æ—Ç 2025-05-28 11-13-20](https://github.com/user-attachments/assets/77656e98-4e81-4fa0-9d0f-0f8a8372c686)


```
/marketplace-project
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ orders/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cmd/            # main.go –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ internal/       # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (DDD-–º–æ–¥—É–ª–∏)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ customers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îÇ
‚îú‚îÄ‚îÄ api-gateway/            # NGINX 
‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îÇ
‚îú‚îÄ‚îÄ monitoring/            # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å Prometheus
‚îÇ   ‚îú‚îÄ‚îÄ prometheus/
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yaml     # –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ 
‚îî‚îÄ‚îÄ README.md
```

## ‚öôÔ∏è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### Orders Service
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤.
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è `order_placed` –≤ Kafka.

### Customers Service
- CRUD –∫–ª–∏–µ–Ω—Ç–æ–≤.
- –û–±—Ä–∞–±–æ—Ç–∫–∞ Kafka-—Å–æ–±—ã—Ç–∏—è `order_placed` —Å –ø–æ–≤—ã—à–µ–Ω–∏–µ–º `activity_score` —É –∫–ª–∏–µ–Ω—Ç–∞.

### Kafka Events

```json
{
  "event": "order_placed",
  "timestamp": "2025-05-28T08:00:00Z",
  "order_id": 123,
  "customer_id": 456,
  "status": "created"
}
````

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

* –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è Prometheus.
* –î–∞—à–±–æ—Ä–¥ –Ω–∞ Grafana ([http://localhost:3000](http://localhost:3000)).

![–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ –æ—Ç 2025-05-27 15-46-31](https://github.com/user-attachments/assets/ab20c19e-fe5c-45d2-87d2-094c63c1fa62)


## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
docker-compose up --build // –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

cd services/orders/       // –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
go run scripts/migrate.go
cd services/customers/
go run scripts/migrate.go
```

–û–∂–∏–¥–∞–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã:

* `http://localhost:8080` ‚Äî NGINX (–ø—Ä–æ–∫—Å–∏ –∫ —Å–µ—Ä–≤–∏—Å–∞–º)
* `http://localhost:9090` ‚Äî Prometheus
* `http://localhost:3000` ‚Äî Grafana
* `http://localhost:9092` ‚Äî Kafka

## üì¶ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

* Golang (–±–µ–∑ ORM, —Ç–æ–ª—å–∫–æ `pgxpool`)
* PostgreSQL
* Apache Kafka
* NGINX
* Docker
* Prometheus & Grafana
* Structured Logging via `slog`

## üìå ToDo

* –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ Redis, –æ–±—Ä–∞—â–∞—Ç—å—Å—è —Å Gateway —Å–Ω–∞—á–∞–ª–∞ –∫ –Ω–µ–º—É
* –°–¥–µ–ª–∞—Ç—å Auth Service, —Å –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç –æ–±—â–∞—Ç—å—Å—è Gateway
* –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Kubernetes

